# Stream I/O

스트림은 데이터를 주고받는 방식이다.

스트림은 현실의 water stream과 비슷하다 : source(시작점)와 destination(목적지)가 있다.

스트림은 따라서 두 종류로 나눌 수 있다.들어오는 InputStream(데이터를 읽어옴)과 나가는 OutputStream(데이터를 외부에 건내줌).

이것을 합쳐서 IOStream이라고 부른다.

이미 알고있는 스트림이 두개 있다 - System.out (System.out.print에서 썼다) 과 System.in(Scanner(System.in)에서 썼다). 이 스트림은 프로그램과 콘솔을 연결하는 스트림이다.

# Stream byte/char

스트림은 또한 데이터를 어떻게 표현하는지로 두가지로 나눌 수 있다

- **byte streams** 은 데이터를 바이트단위로 생각한다;
- **char streams** 은 16-bit 유니코드 형식에 맞는 캐릭터단위로 생각한다.

char stream은 프로그래머에게 더 유리한 데이터 형식이다(사람은 캐릭터단위로 생각하니까).

반대로 byte stream은 원시적인 형태이지만 텍스트가 아닌 다른타입들(이미지,음악등 멀티미디어)를 다룰 수 있다.

## Buffered streams 버퍼스트림

어떤 스트림은 메모리에 임시저장소를 두고 쓴다.

우선 스트림은 임시저장소에서 데이터를 읽거나 쓴다. 그리고 그걸 소스나목적지로 옮긴다. 즉 중간에 한번 저장소가 들어간다.

이 임시저장소는 보통 byte나 character 배열이다.

그리고 우린 그걸 `buffer`라고 부른다.

그리고 이 한번 거치는 과정을 `buffering`이라고 부른다.

임시저장소를 쓰는 이유는 ? 소스나 목적지에 접근할 때 시간이 걸리기 때문이다.

버퍼링은 접근을 최대한 적게 해주는 일종의 최적화라고 할 수 있다.

> 4000바이트를 그냥 읽는다면,
>
> 1바이트를 읽어서 가져오고,
>
> 다음바이트를 읽어서가져오고, 
>
> 이렇게 4000번이 걸린다.
>
> 버퍼를 쓴다면(크기가 1000짜리)
>
> 1000 버퍼에 넣고,가져온다.
>
> 이런식으로 4번이 걸린다.

output stream에서 버퍼링이 작동하는 방식 - 데이터를 쓰면, 이것은 우선 버퍼에 저장된다.버퍼가 꽉 차면, 저장된 데이터들이 목적지에 작성된다.

어떤 인풋스트림들도 버퍼링을 할 수 있다. 스트림이 처음 데이터를 읽으면 , 버퍼에 넣을 수 있는 만큼 읽는다. 만약 읽을 데이터가 무척 적더라도, 버퍼인풋스트림은 버퍼가 꽉찰 때까지 읽을 것이다. 다음 읽기는 우선 시작할 때 버퍼에 빈데이터가 있는지 확인한다. 빈칸이 있다면 버퍼를 읽고 더이상 소스에 접근할 필요가 없다. 없다면 , 다시 소스에 접근해서 처음과정을 반복할 것이다.

